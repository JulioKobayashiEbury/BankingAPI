@startuml
participant userOwner as userOwner
boundary userHandler as userHandler
control service as service
control repository as repository
database firestore as firestore

userOwner -> userHandler : /users/auth
userHandler -> userHandler : UserAuthHandler

userHandler -> service : Authenticate
service -> user : Get
user -> repository : GetFireStoreClient
repository -> firestore : NewClient
firestore -> repository : firestore.Client
repository -> user : firestore.Client
user -> service : user.UserResponse
service -> userHandler : boolean

alt True
userHandler -> service : GenerateToken
service -> userHandler : http.Cookie
userHandler -> userOwner : http.StatusAccepted
else False
userHandler -> userOwner : http.Unauthorized
end
@enduml
