@startuml
title Delete Client - DELETE /clients/:client_id

actor Requester
boundary ClientDeleteHandler <<clientHandler.go>>
control AuthorizeService <<serviceAuthorize.go>>
control ClientService <<serviceDeleteTypes.go>>
entity ClientFirestore <<model/client/firestore.go>>

activate Requester 

Requester -> ClientDeleteHandler : DELETE /clients/:client_id
activate ClientDeleteHandler

ClientDeleteHandler -> AuthorizeService : Authorize(Cookie)
activate AuthorizeService
AuthorizeService -->> ClientDeleteHandler : Claims / Error
deactivate AuthorizeService

alt Authorization Failed
    ClientDeleteHandler -->> Requester : HTTP Error Response
else Authorization Succeeded

    ClientDeleteHandler -> ClientService : ClientDelete(clientID_from_path)
    activate ClientService
    ClientService -> ClientFirestore : Delete(&clientID_from_path)
    activate ClientFirestore
    ClientFirestore -->> ClientService : nil / Error
    deactivate ClientFirestore
    
    alt Delete Client Failed
        ClientService -->> ClientDeleteHandler : Error
        ClientDeleteHandler -->> Requester : HTTP Error Response
    else Delete Client Succeeded
        ClientService -->> ClientDeleteHandler : nil
        ClientDeleteHandler -->> Requester : HTTP 200 OK (Message: Client deleted seccesfully)
    end
    deactivate ClientService
end
deactivate ClientDeleteHandler

deactivate Requester
@enduml